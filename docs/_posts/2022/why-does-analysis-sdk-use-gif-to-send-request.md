---
title: 主流的数据统计服务为什么选择gif发送请求
date: 2022-3-12
author: czj
lang: zh-cn
tags:
summary: 百度统计通过请求 hm.gif 来发送统计数据，为什么要选择GIF
---





观察百度统计的sdk发现，百度统计选择请求 hm.gif 发送数据，为什么是GIF, 而不是接口，更不是同为图片的 PNG, JPG



以下是一个百度统计的请求实例

```js
https://hm.baidu.com/hm.gif?cc=1&ck=1&cl=24-bit&ds=2048x1152&vl=1042&et=0&ja=0&ln=zh-cn&lo=0&rnd=2115155333&si=24612437a0e31159f0220c5180f93f1c&v=1.2.91&lv=2&sn=618&r=0&ww=1542&ct=!!&u=http%3A%2F%2F124.222.109.221%3A8081%2F&tt=Post%20%7C%20Czj%E7%9A%84%E5%8D%9A%E5%AE%A2
```



既然都选择了 GIF 必然是有原因



经过一番查找，主要有以下几点：

1. 跨域问题

   一般调用统计接口的都不在统计服务域名下，在浏览器中，接口存在跨域问题因此排除，图片不存在跨域问题

2. 性能问题

   js, css 也可以跨域，但是js, css 必须将节点插入到 dom 树中， 浏览器才会发送请求，而频繁操作dom 会有性能问题。

   不同的是，图片资源只需要在js 中 new Image 对象就会发起请求，而且就算是不支持 js 的环境也可以通过 img 标签发送请求

3. 请求体积小，节约带宽

   相比于其他的图片，GIF 文件请求是最小的。

   最小的BMP文件是74字节，PNG是67字节，GIF 子需要43字节